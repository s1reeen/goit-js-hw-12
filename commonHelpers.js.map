{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pizsbay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport default function renderImages(images) {\n  loader.classList.add('visually-hidden');\n  const markup = images\n    .map(img => {\n      return `<li class=\"gallery-item\">\n\t\t   <a class=\"gallery-link\" href=${img.largeImageURL}>\n\t\t\t   <img class=\"gallery-image\" src=${img.webformatURL} alt=\"${img.tags}\" />\n\t\t   </a>\n\t\t   <div class=\"container\">\n\t\t\t   <div class=\"container-text\"><h3 class=\"titel-text\">Likes</h3><p class=\"text\">${img.likes}</p></div>\n\t\t\t   <div class=\"container-text\"><h3 class=\"titel-text\">Views</h3><p class=\"text\">${img.views}</p></div>\n\t\t\t   <div class=\"container-text\"><h3 class=\"titel-text\">Comments</h3><p class=\"text\">${img.comments}</p></div>\n\t\t\t   <div class=\"container-text\"><h3 class=\"titel-text\">Dowloads</h3><p class=\"text\">${img.downloads}</p></div>\n\t\t   </div>\n\t   </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  let galleryModalWindow = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\n  galleryModalWindow.refresh();\n}\n","import axios from 'axios';\n\nexport class infoAPI {\n  static PAGE_SIZE = 15;\n\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com/api/';\n    this.query = null;\n    this.page = 1;\n    this.totalResult = 0;\n  }\n  async getInfoArticles() {\n    const params = {\n      key: '42169950-0e8cca4ed1d3fcef898dec13a',\n      q: this.query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: infoAPI.PAGE_SIZE,\n      page: this.page,\n    };\n    return await axios.get(`${this.BASE_URL}`, { params }).then(res => {\n      if (res.data.hits.length === 0) {\n        throw new Error('Error');\n      } else {\n        return res.data;\n      }\n    });\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n/*=============================================================*/\nimport renderImages from './js/render-functions';\nimport { infoAPI } from './js/pizsbay-api';\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.js-load-more');\n\nconst newInfoApi = new infoAPI();\nlet checkLastHits = 0;\n\nform.addEventListener('submit', creatGallery);\nloadMore.addEventListener('click', addNewInfo);\n\nasync function creatGallery(event) {\n  event.preventDefault();\n  const infoSearch = form.elements.text.value.trim();\n  form.elements.text.value = '';\n  gallery.innerHTML = '';\n\n  if (infoSearch) {\n    loader.classList.remove('visually-hidden');\n\n    newInfoApi.page = 1;\n    newInfoApi.query = infoSearch;\n\n    try {\n      const data = await newInfoApi.getInfoArticles(infoSearch);\n      checkLastHits = Math.ceil(data.totalHits / infoAPI.PAGE_SIZE);\n      renderImages(data.hits);\n\n      if (newInfoApi.page === checkLastHits) {\n        loadMore.classList.add('visually-hidden');\n        iziToast.info({\n          position: 'topRight',\n          message: `We're sorry, but you've reached the end of search results.`,\n        });\n      } else {\n        loadMore.classList.remove('visually-hidden');\n      }\n    } catch {\n      loadMore.classList.add('visually-hidden');\n      loader.classList.add('visually-hidden');\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } else {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n\nasync function addNewInfo() {\n  loader.classList.remove('visually-hidden');\n  loadMore.classList.add('visually-hidden');\n\n  if (newInfoApi.page < checkLastHits) {\n    loadMore.classList.remove('visually-hidden');\n    newInfoApi.page += 1;\n    const data = await newInfoApi.getInfoArticles();\n    renderImages(data.hits);\n\n    const heightElement = document.querySelector('.gallery-item');\n    const height = heightElement.getBoundingClientRect();\n\n    window.scrollBy({\n      top: height.height * 2,\n      behavior: 'smooth',\n    });\n  }\n\n  if (newInfoApi.page === checkLastHits) {\n    loadMore.classList.add('visually-hidden');\n    iziToast.info({\n      position: 'topRight',\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n  }\n}\n"],"names":["gallery","loader","renderImages","images","markup","img","SimpleLightbox","_infoAPI","params","axios","res","__publicField","infoAPI","form","loadMore","newInfoApi","checkLastHits","creatGallery","addNewInfo","event","infoSearch","data","iziToast","height"],"mappings":"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"}