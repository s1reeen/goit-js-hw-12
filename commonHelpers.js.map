{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function pixabayApi(url) {\n  try {\n    const response = await axios.get(url);\n    return response;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n","const fragment = document.createDocumentFragment();\nconst gallery = document.querySelector('.gallery');\nexport function renderFunctions(arrayImg) {\n  arrayImg.forEach(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      const galleryItem = document.createElement('li');\n      galleryItem.classList.add('gallery-items');\n\n      galleryItem.insertAdjacentHTML(\n        'beforeend',\n        `<a class='gallery-link' href='${largeImageURL}'>\n        <img class='gallery-image' src='${webformatURL}' alt='${tags}' />\n        <ul class='gallery-ul'>\n          <li class='gallery-item'><h3 class='gallery-title'>Likes</h3><p class='gallery-value'>${likes}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Views</h3><p class='gallery-value'>${views}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Comments</h3><p class='gallery-value'>${comments}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Downloads</h3><p class='gallery-value'>${downloads}</p></li>\n        </ul>\n      </a>`\n      );\n      fragment.appendChild(galleryItem);\n    }\n  );\n\n  gallery.appendChild(fragment);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { pixabayApi } from './js/pixabay-api.js';\nimport { renderFunctions } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst request = {\n  key: '42159131-e2480a23f0f5c24b1f6f03d93',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: 1,\n};\n\nlet totalImg = 0;\n\nconst options = {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  request.page = 1;\n\n  const input = document.querySelector('input');\n  const inputValue = input.value.trim();\n\n  if (!inputValue) {\n    iziToast.warning({\n      message: 'You forgot to enter your details',\n    });\n  } else {\n    showLoader();\n    request.q = inputValue;\n    const url = BASE_URL + new URLSearchParams(request);\n    getImages(url);\n  }\n  input.value = '';\n});\n\nconst getImages = async (url, scrollHight) => {\n  await pixabayApi(url)\n    .then(({ data }) => {\n      const arrayImg = data.hits;\n      totalImg = data.totalHits;\n\n      if (arrayImg.length > 0) {\n        render(arrayImg);\n        window.scrollBy({\n          top: scrollHight,\n          behavior: 'smooth',\n        });\n      } else {\n        showLoader();\n        iziToast.warning({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: '#f83d04',\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.warning({\n        message: error,\n      });\n    });\n};\n\nfunction render(arrayImg) {\n  renderFunctions(arrayImg);\n\n  showLoader();\n  btnLoad.classList.remove('hide');\n  lightbox.refresh();\n  totalImgFunction();\n}\n\nbtnLoad.addEventListener('click', () => {\n  request.page += 1;\n  const url = BASE_URL + new URLSearchParams(request);\n\n  showLoader();\n  btnLoad.classList.add('hide');\n\n  const scrollHight =\n    document.querySelector('.gallery-items').getBoundingClientRect().height *\n      2 +\n    26;\n\n  getImages(url, scrollHight);\n});\n\nfunction showLoader() {\n  if (loader.classList.contains('hide')) {\n    loader.classList.remove('hide');\n  } else {\n    loader.classList.add('hide');\n    btnLoad.classList.add('hide');\n  }\n}\n\nfunction totalImgFunction() {\n  if (\n    totalImg < request.page * request.per_page &&\n    !btnLoad.classList.contains('hide')\n  ) {\n    btnLoad.classList.add('hide');\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n"],"names":["pixabayApi","url","axios","error","fragment","gallery","renderFunctions","arrayImg","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItem","form","loader","btnLoad","BASE_URL","request","totalImg","options","lightbox","SimpleLightbox","event","input","inputValue","iziToast","showLoader","getImages","scrollHight","data","render","totalImgFunction"],"mappings":"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"}